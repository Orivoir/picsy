(this.webpackJsonppicsy=this.webpackJsonppicsy||[]).push([[0],Array(27).concat([function(e,t,a){e.exports=a.p+"static/media/loader-timer.8835a88b.svg"},function(e,t,a){e.exports=a.p+"static/media/loader-button.3de4de61.svg"},function(e,t,a){e.exports=a.p+"static/media/loader-azure.df696f68.svg"},,,,,,function(e,t,a){},,,function(e,t,a){e.exports=a.p+"static/media/loader-earth.5f4bc2b1.svg"},,,,function(e,t,a){e.exports=a(103)},,,,,function(e,t,a){},,,,,,,,,,,,function(e,t,a){},function(e,t,a){},,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,function(e,t,a){},function(e,t,a){},,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(36),o=a.n(c),u=(a(47),a(4)),l=a(23);l.initializeApp({apiKey:"AIzaSyBTZQaxY4tK4wD1CFIAdZYoBNIFNXjpHZI",authDomain:"picsy-827e5.firebaseapp.com",databaseURL:"https://picsy-827e5.firebaseio.com",projectId:"picsy-827e5",storageBucket:"picsy-827e5.appspot.com",messagingSenderId:"228973782937",appId:"1:228973782937:web:8c6a64e32d37e3c8c7d508"});var i={users:l.firestore().collection("users"),albums:l.firestore().collection("albums"),pictures:l.firestore().collection("pictures"),getUser:function(e){var t=this;return new Promise((function(a,n){return t.users.doc(e).get().then((function(e){return a(e.get("pseudo")?e:null)})).catch((function(e){return n(e)}))}))},isLogged:function(e){var t=this;return new Promise((function(a,n){if(!e)return n();t.getUser(e).then((function(e){return a(e?{success:!0,user:e}:{success:!1})})).catch((function(e){return n(e)}))}))},pictureSetFilters:function(e,t){var a=this;return new Promise((function(n,r){a.pictures.doc(e).get().then((function(c){var o=a.pictures.doc(e),l=c.get("filters").filter((function(e){return!t.find((function(t){return t.key===e.key}))}));o.get().then((function(){return o.set({name:c.get("name"),createAt:c.get("createAt"),album_id:c.get("album_id"),filters:[].concat(Object(u.a)(l),Object(u.a)(t)),blob:c.get("blob")}).then((function(){return n({success:!0})})).catch((function(e){return r(e)}))})).catch((function(e){return r(e)}))})).catch((function(e){return r(e)}))}))},pictureSetFilter:function(e,t){var a=this;return new Promise((function(n,r){a.pictures.doc(e).get().then((function(c){var o=c.get("filters"),u=!1,l=o.map((function(e){try{"string"===typeof e&&(e=JSON.parse(e))}catch(a){e={}}return e.key===t.key&&(e.val=t.val,u=!0),e}));u||l.push(JSON.stringify({key:t.key,val:t.val}));var i=a.pictures.doc(e);i.get().then((function(){return i.set({name:c.get("name"),createAt:c.get("createAt"),album_id:c.get("album_id"),filters:l.filter((function(e){try{"string"===typeof e&&(e=JSON.parse(e))}catch(t){return!1}return e.key&&e.val})),blob:c.get("blob")}).then((function(){return n({success:!0})})).catch((function(e){return r(e)}))})).catch((function(e){return r(e)}))})).catch((function(e){return r(e)}))}))},getImgsOf:function(e){var t=this;return new Promise((function(a,n){return t.albums.doc(e).get().then((function(){return t.pictures.get().then((function(t){return a(t.docs.filter((function(t){return t.get("album_id")===e})))})).catch((function(e){return n(e)}))})).catch((function(e){return n(e)}))}))},addAlbum:function(e,t){var a=this;return new Promise((function(n,r){e||t||r({status:401}),a.getAlbumsOf(t).then((function(c){if(c.find((function(t){return t.get("name")===e})))return n({success:!1,status:401,details:"already exists"});a.albums.add({user_id:t,name:e,createAt:Date.now(),size:0}).then((function(){return n({success:!0})})).catch((function(e){return r(e)}))})).catch((function(e){return r(e)}))}))},albumUp:function(e){var t=this;return new Promise((function(a,n){var r=t.albums.doc(e);r.get().then((function(e){if(!e.get("createAt"))return n({partial:e});r.set({createAt:e.get("createAt"),name:e.get("name"),size:parseInt(e.get("size"))+1,user_id:e.get("user_id")}).then((function(){return a({success:!0})})).catch((function(e){return n(e)}))})).catch((function(e){return n(e)}))}))},albumDown:function(e){var t=this;return new Promise((function(a,n){var r=t.albums.doc(e);r.get().then((function(e){r.set({createAt:e.get("createAt"),name:e.get("name"),size:parseInt(e.get("size"))-1,user_id:e.get("user_id")}).then((function(){return a({success:!0})})).catch((function(e){return n(e)}))})).catch((function(e){return n(e)}))}))},getPictureOf:function(e){var t=this;return new Promise((function(a,n){if(!e)return n();t.pictures.get().then((function(t){return a(t.docs.filter((function(t){return t.get("album_id")===e})))}))}))},addPicture:function(e,t,a){var n=this;return new Promise((function(r,c){if(!(e||t||a))return c();n.albums.doc(e).get().then((function(){n.getPictureOf(e).then((function(o){o.find((function(e){return e.get("name")===t}))?r({success:!1,status:401}):n.pictures.add({album_id:e,blob:a,createAt:Date.now(),name:t,filters:[]}).then((function(){n.albumUp(e).then((function(){r({success:!0,id:e,name:t,blob:a})})).catch((function(e){return c(e)}))})).catch((function(e){return c(e)}))}))})).catch((function(e){return c({status:404})}))}))},rnameImg:function(e,t,a){var n=this;return new Promise((function(r,c){e||t||c();var o=n.pictures.doc(e);n.pictures.get().then((function(e){e.docs.find((function(e){return e.get("name")===t&&e.get("album_id")===a}))?r({success:!1,status:401,details:"name already exists"}):o.get().then((function(e){o.set({blob:e.get("blob"),album_id:e.get("album_id"),filters:e.get("filters")||[],name:t,createAt:e.get("createAt")||Date.now()}).then((function(){return r({success:!0})})).catch((function(e){return c(e)}))})).catch((function(e){return r({success:!1,status:404,err:e})}))})).catch((function(){return c()}))}))},rnameAlbum:function(e,t){var a=this;return new Promise((function(n,r){e||t||r();var c=a.albums.doc(e);c.get().then((function(e){e.get("name")===t&&n({success:!0}),c.set({name:t,createAt:e.get("createAt"),size:e.get("size"),user_id:e.get("user_id")}).then((function(){return n({success:!0})}))})).catch((function(e){return r(e)}))}))},getAlbumsOf:function(e){var t=this;return new Promise((function(a,n){return t.albums.get().then((function(t){return a(t.docs.filter((function(t){return t.get("user_id").trim()===e.trim()})))})).catch((function(e){return n(e)}))}))},removePicture:function(e){var t=this;return new Promise((function(a,n){if(!e)return n();var r=t.pictures.doc(e);if(!r||!(r.get instanceof Function))return a({status:404,success:!1});r.get().then((function(e){r.delete().then((function(){t.albumDown(e.get("album_id")).then((function(){a({success:!0})})).catch((function(e){return n(e)}))})).catch((function(){return n()}))}))}))},removeAlbum:function(e){var t=this;return new Promise((function(a,n){e||n({status:401,id:e});var r=t.albums.doc(e);r&&r.get instanceof Function||n({refAlbum:r,id:e,status:404}),r.get().then((function(){r.delete().then((function(){t.getPictureOf(e).then((function(e){e.map((function(e){return t.removePicture(e.id)})),a({success:!0})})).catch((function(e){return n(e)}))})).catch((function(e){return n(e)}))})).catch((function(e){return n(e)}))}))}},s=a(7),m=a(6),f=a(9),d=a(8),p=a(17),b=a(10),h=(a(59),a(27)),g=a.n(h),v=a(38),E=a.n(v),y=a(28),O=a.n(y),j=a(29),S=a.n(j);function I(e){return{timer:g.a,btn:O.a,button:O.a,earth:E.a,azure:S.a,az:S.a}[e]||g.a}var k=function(e){var t=e.className,a=e.width,n=e.full,c=e.type,o=e.bg;return r.a.createElement("figure",{className:"Loader ".concat(t," ").concat(n?"full":""),style:{backgroundColor:o||"transparent"}},r.a.createElement("img",{alt:"loader ".concat(c),src:I(c),width:a}))},D=a(19),N=a(11),w=a.n(N),C=a(3),x=(a(60),a(39)),F=a.n(x);function A(e){var t={warn:"fas fa-exclamation-triangle",warning:"fas fa-exclamation-triangle",error:"fas fa-bomb",infos:"fas fa-info-circle",info:"fas fa-info-circle",success:"fas fa-check-circle",bug:"fas fa-bug",mask:"fas fa-mask",back:"fas fa-hand-point-left"};return t[e]||t.mask}var R=function(e){var t=e.type,a=e.className,c=e.onClose,o=e.text,u=e.tooltip,l=e.place,i=e.effect,s=Object(n.useState)(r.a.createRef()),m=Object(C.a)(s,1)[0],f=Object(n.useState)(!1),d=Object(C.a)(f,2),p=d[0],b=d[1];return r.a.createElement(r.a.Fragment,null,u?r.a.createElement(F.a,{id:u,type:"infos"===t?"info":"bug"===t?"error":"warn"===t?"warning":t,getContent:function(){return r.a.createElement("span",{style:{fontSize:"16px",display:"flex",alignItems:"center",justifyContent:"space-around"}},r.a.createElement("i",{className:A(t)}),"\xa0",o)},effect:i||"solid",place:l||"top"}):r.a.createElement("section",{ref:m,className:"Notif ".concat(a," ").concat(t," ").concat(p?"hide":"")},r.a.createElement("p",null,r.a.createElement("i",{className:A(t)}),r.a.createElement("span",null,o)),c instanceof Function&&r.a.createElement("aside",null,r.a.createElement("button",{onClick:function(){return c({ref:m,notif:m.current,remove:function(){return m.current instanceof Node&&m.current.parentNode instanceof Node&&(m.current.parentNode.removeChild(m.current),!0)},hide:function(){b(!0)}})}},r.a.createElement("i",{className:"fas fa-times"})))))};var P=function(e){var t=e.className,a=e.label,n=e.name,c=e.id,o=e.onChange,u=e.autoRead,l=e.notif;return r.a.createElement(r.a.Fragment,null,a&&r.a.createElement("label",{htmlFor:c||n},a),r.a.createElement("input",{className:t,type:"file",name:n,id:c||n,onChange:function(e){if(o instanceof Function){var t=e.target.files[0];if(u){var a=null,n=new FileReader,r=e;n.addEventListener("load",(function(e){a=e.target.result,o(t,a,r)})),n.readAsDataURL(t)}else o(t,e)}}}),l)};a(76);var U=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(R,{type:"info",text:"d\xe9pot github",place:"top",tooltip:"git-link"}),r.a.createElement("p",{className:"sign-in"},r.a.createElement("span",null,"Application front UI/UX"),"\xa0d\xe9velopper ",r.a.createElement("span",null,"avec le CRA de Reactjs\xa0"),"par \xa0",r.a.createElement("a",{"data-for":"git-link","data-tip":"lien github",href:"https://github.com/Orivoir/picsy"},r.a.createElement("i",{className:"fab fa-github"}),"\xa0Samuel Gaborieau")))},z=(a(77),function(e){function t(){return Object(s.a)(this,t),Object(f.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onSubmit,a=e.onChangeAvatar,n=e.onChangePseudo,c=e.valuePseudo,o=e.fileName,u=e.avatar,l=e.loaderSubmit,i=e.errors;return r.a.createElement("form",{className:"FormUser",onSubmit:t},r.a.createElement("section",null,r.a.createElement("div",{className:"field-wrap-pseudo"},r.a.createElement("input",{placeholder:"pseudo",type:"text",name:"pseudo",autoComplete:"off",onChange:n,value:c}),r.a.createElement("label",{htmlFor:"pseudo",className:"o-hide ".concat(c.trim().length?"active":"")},"pseudo")),r.a.createElement("div",null,r.a.createElement(P,{className:"hide",label:r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"hide micro-system"},o?o.length>7?o.slice(0,7)+" ...":o:"avatar"),r.a.createElement("figure",null,r.a.createElement("button",{type:"button",onClick:function(e){e.target.parentNode.click()}},r.a.createElement("img",{src:u,alt:"avatar",width:64})),r.a.createElement("figcaption",null,"changer"))),name:"avatar",autoRead:!0,onChange:a})),r.a.createElement("button",{type:"submit"},l||"suivant")),r.a.createElement(U,null),i.map((function(e){return e})))}}]),t}(r.a.Component)),L=(a(78),function(e){function t(e){var a;Object(s.a)(this,t),(a=Object(f.a)(this,Object(d.a)(t).call(this,e))).state={loader:r.a.createElement(k,{full:!0,type:"az",width:256,bg:"rgba(0,0,0,.93)"}),u:!1,redirect:!1,pseudo:"",avatar:t.defaultAvatar,errors:[],loaderButton:!1,fileName:""},a.userID=localStorage.getItem("userID")||w.a.getItem("userID");try{a.userID=JSON.parse(a.userID)}catch(n){a.userID=[]}return a.avatarChange=a.avatarChange.bind(Object(p.a)(a)),a.onSubmit=a.onSubmit.bind(Object(p.a)(a)),document.title="Picsy | Log in",a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"onSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state.pseudo;if(a.length>=2&&a.length<=40){var n=this.state.avatar;this.setState({loaderButton:r.a.createElement(k,{width:16,type:"btn"})},(function(){t.props.db.users.add({pseudo:a,avatar:n}).then((function(e){t.userID||(t.userID=[]),t.userID.push(e.id),localStorage.setItem("userID",JSON.stringify(t.userID)),w.a.setItem("userID",JSON.stringify(t.userID),new Date(1.5*Date.now())),t.setState({redirect:r.a.createElement(D.c,{to:"/account-list"})})}))}))}else this.setState((function(e){return{errors:[].concat(Object(u.a)(e.errors),[r.a.createElement(R,{key:Date.now(),text:"pseudo taille invalide",type:"error",onClose:function(e){return(0,e.remove)()}})])}}))}},{key:"avatarChange",value:function(e,t,a){if(e.size<=1e6&&/image/.test(e.type))this.setState({avatar:t,fileName:e.name});else{var n=e.size>=1e6?"fichier trop volumineux":"ce fichier n'est pas une image .";this.setState((function(e){return{errors:[].concat(Object(u.a)(e.errors),[r.a.createElement(R,{key:Date.now(),text:n,type:"error",onClose:function(e){return(0,e.remove)()}})])}}))}}},{key:"componentDidMount",value:function(){this.userID&&this.userID.length?this.setState({redirect:r.a.createElement(D.c,{to:"/account-list"})}):this.setState({loader:!1})}},{key:"render",value:function(){var e=this,t=this.state,a=t.loader,n=t.redirect,c=t.avatar,o=t.errors,u=t.loaderButton,l=t.fileName;return r.a.createElement("section",{className:"Logged"},a,n,r.a.createElement(z,{onSubmit:this.onSubmit,onChangePseudo:function(t){return e.setState({pseudo:t.target.value.trim()})},avatar:c,valuePseudo:this.state.pseudo,fileName:l,errors:o,loaderSubmit:u,onChangeAvatar:function(t,a,n){return e.avatarChange(t,a,n)}}),r.a.createElement("section",{className:"banner-sm-screen hide"},r.a.createElement("p",null,"Picsy et Lorem dolore veniam culpa velit sint , Anim cupidatat mollit consequat et ipsum ipsum eu ullamco eu ullamco elit non."),r.a.createElement("button",{type:"button"},"get started")))}}]),t}(r.a.Component));L.defaultAvatar="https://image.flaticon.com/icons/png/128/149/149071.png";a(83),a(84);var V=function(e){var t=e.title,a=e.subtitle,n=e.className;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:n},t),a&&r.a.createElement("blockquote",null,a))},_=a(14);var M=function(e){var t=e.tooltip,a=e.className,n=e.target,c=e.onClick,o=e.classHandle,u=e.loader;return r.a.createElement(r.a.Fragment,null,t,r.a.createElement("span",{"data-for":t.props.tooltip,id:t.props.tooltip,"data-tip":t.props.text},n?r.a.createElement(_.HashLink,{to:n,onClick:c instanceof Function?c:function(){},className:o},r.a.createElement("i",{className:a})):r.a.createElement("button",{type:"button",className:o,onClick:c instanceof Function?c:function(){}},u||r.a.createElement("i",{className:a}))))},J={User:[{id:0,tooltip:r.a.createElement(R,{type:"info",place:"bottom",tooltip:"user",text:"ajout\xe9 un compte"}),target:"/add-account",className:"fas fa-user-plus"},{id:1,tooltip:r.a.createElement(R,{type:"info",place:"bottom",tooltip:"change",text:"chang\xe9 de compte"}),target:"/account-list",className:"fas fa-person-booth"}]}.User;var H=function(e){var t=e.u,a=e.load;return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"User"},a||r.a.createElement(r.a.Fragment,null,r.a.createElement(V,{title:r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,"Picsy")," application"),subtitle:"version 0.2.2-beta"}),r.a.createElement("div",{className:"content-user"},r.a.createElement("figure",null,r.a.createElement("img",{src:t.get("avatar"),alt:"avatar",width:"125"}),r.a.createElement("figcaption",null,t.get("pseudo"))),J.map((function(e){return r.a.createElement(M,{key:e.id,tooltip:e.tooltip,target:e.target,className:e.className})}))),r.a.createElement(U,null))))},T=(a(35),a(88),r.a.createRef()),B={confirm:r.a.createRef(),cacel:r.a.createRef()},K={ref:T,confirm:T.current};var W=function(e){var t=e.onConfirm,a=e.onCancel,c=e.onFinally,o=e.textConfirm,u=e.textCancel,l=e.textGlobal,i=e.text,s=e.className,m=e.autoFocus,f=e.autoFocusCancel,d=e.autoFocusConfirm,p=e.icons,b=e.title;return Object(n.useEffect)((function(){f?B.cancel.current.focus():(d||m)&&B.confirm.current.focus()})),r.a.createElement("section",{className:"Confirm ".concat(s),ref:T},b&&r.a.createElement("h2",null,b),r.a.createElement("p",null,l||i),r.a.createElement("aside",null,r.a.createElement("button",{type:"button",className:"confirm",onClick:function(){var e=t instanceof Function?t:function(){},a=c instanceof Function?c:function(){};e(K),a(K)},ref:B.confirm},p&&r.a.createElement("i",{className:"fas fa-check"}),r.a.createElement("span",null,o)),r.a.createElement("button",{className:"cancel",ref:B.cancel,type:"button",onClick:function(){var e=a instanceof Function?a:function(){},t=c instanceof Function?c:function(){};e(K),t(K)}},p&&r.a.createElement("i",{className:"fas fa-times"}),r.a.createElement("span",null,u))))};a(89);var Z=function(e){var t=e.manualOpen,a=e.open,c=e.onClose,o=e.onRemove,u=e.onRname,l=e.loadRname,i=e.pic,s=e.errorsRname,m=e.onOpen,f=e.itemType,d=e.closer,p=e.tipRemove,b=Object(n.useState)(!1),h=Object(C.a)(b,2),g=h[0],v=h[1],E=Object(n.useState)(!1),y=Object(C.a)(E,2),O=y[0],j=y[1],S=Object(n.useState)(""),I=Object(C.a)(S,2),k=I[0],D=I[1],N=Object(n.useState)(r.a.createRef()),w=Object(C.a)(N,1)[0],x=Object(n.useState)(r.a.createRef()),F=Object(C.a)(x,1)[0];return Object(n.useEffect)((function(){a&&!g&&setTimeout((function(){w.current&&w.current.focus()}),250)})),r.a.createElement("ul",{className:"ControlItem",onMouseEnter:function(){return m instanceof Function?m():null},onMouseLeave:function(){!t&&c instanceof Function&&c()}},r.a.createElement("li",{className:"".concat(a&&!g?"":"hide")},r.a.createElement(M,{tooltip:r.a.createElement(R,{type:"info",place:"top",tooltip:"rname-".concat(Date.now()),text:r.a.createElement(r.a.Fragment,null,"renom\xe9 l'","album"!==f?"image":"album")}),className:"fas fa-pen",onClick:function(){j(!0),setTimeout((function(){return F.current.focus()}),120)},classHandle:"".concat(O?"hide":"")}),r.a.createElement("form",{className:"".concat(O?"":"close"),onSubmit:function(e){e.preventDefault(),u(k),D("")}},r.a.createElement("input",{ref:F,className:"input-rname rname ".concat(O?"open":"hide"," ").concat(l?"load-input":""),type:"text",name:"rname",value:k,onChange:function(e){return D(e.target.value)},autoComplete:"off",placeholder:i.get("name"),disabled:!!l}),r.a.createElement(M,{tooltip:r.a.createElement(R,{type:"info",place:"top",tooltip:"back",text:"ferm\xe9"}),loader:l,className:"fas fa-times",onClick:function(){return j(!1)},classHandle:"rname-btn ".concat(O?"":"hide"," ").concat(l?"load-btn disabled":"")}),s.map((function(e){return e})))),r.a.createElement("li",{className:"".concat(a&&!O?"":"hide")},g||r.a.createElement(r.a.Fragment,null,r.a.createElement(M,{tooltip:r.a.createElement(R,{type:"info",place:"top",tooltip:"remove",text:r.a.createElement(r.a.Fragment,null,p||r.a.createElement(r.a.Fragment,null,"supprim\xe9 l'","album"!==f?"image":"album"))}),className:"fas fa-trash",onClick:function(){return v(r.a.createElement(W,{onConfirm:o,onFinally:function(){return v(!1)},text:"\xeates vous sur de vouloir supprimez l'".concat(f," ").concat(i.get("name")),textConfirm:"oui",textCancel:"non",className:"confirm-remove confirm-remove-picture",icons:!0,autoFocus:!0}))}}))),r.a.createElement("li",{className:"".concat(a&&!O&&d&&!g?"":"hide")},r.a.createElement(M,{tooltip:r.a.createElement(R,{type:"info",place:"top",tooltip:"close",text:"f\xe9rmer le menu"}),className:"fas fa-times",onClick:function(){return c instanceof Function?c():null}})))},q=(a(90),r.a.createRef());var G=function(e){var t=e.item,a=e.db,c=Object(n.useState)(!1),o=Object(C.a)(c,2),l=o[0],i=o[1],s=Object(n.useState)(!1),m=Object(C.a)(s,2),f=m[0],d=m[1],p=Object(n.useState)(!0),b=Object(C.a)(p,2),h=b[0],g=b[1],v=Object(n.useState)(t.get("name")),E=Object(C.a)(v,2),y=E[0],O=E[1],j=Object(n.useState)(!1),S=Object(C.a)(j,2),I=S[0],N=S[1],w=Object(n.useState)(!1),x=Object(C.a)(w,2),F=x[0],A=x[1],P=Object(n.useState)([]),U=Object(C.a)(P,2),z=U[0],L=U[1],V=Object(n.useState)(r.a.createRef()),M=Object(C.a)(V,1)[0],J=Object(n.useState)(null),H=Object(C.a)(J,2),T=H[0],B=H[1];return Object(n.useEffect)((function(){null===T&&function(e,t){return new Promise((function(a,n){t.getPictureOf(e).then((function(e){return a(e.length)}))}))}(t.id,a).then((function(e){return B(e||0)}))})),r.a.createElement(r.a.Fragment,null,F,h&&r.a.createElement("li",{onMouseEnter:function(){return i(!0)},onMouseLeave:function(){return i(!1)},className:"AlbumItem ".concat(h?"":"hide"),ref:M},r.a.createElement("div",{className:"number-item"},null===T?r.a.createElement(k,{width:32,type:"az"}):T," images"),r.a.createElement("button",{className:"album-btn",ref:q,onKeyDown:function(e){/menu/i.test(e.key)&&i(!0),N(!0)},onClick:function(){return A(r.a.createElement(D.c,{to:"album/".concat(t.id)}))},onContextMenu:function(e){return e.preventDefault()}},r.a.createElement(_.HashLink,{onPointerUp:function(e){3===e.nativeEvent.which&&(i(!0),N(!0))},to:"album/".concat(t.id)},y)),r.a.createElement("section",null,r.a.createElement("aside",null,r.a.createElement(Z,{tipRemove:"abc",itemType:"album",onRemove:function(){a.removeAlbum(t.id).then((function(){g(!1),i(!1)}))},manualOpen:I,onOpen:function(){return i(!0)},onRname:function(e){d(r.a.createElement(k,{width:12,type:"azure"})),a.rnameAlbum(t.id,e).then((function(){L([].concat(Object(u.a)(z),[r.a.createElement(R,{onClose:function(e){return(0,e.remove)()},key:Date.now(),text:"l'album \xe0 \xe9t\xe9 renom\xe9 avec succ\xe9s",type:"success"})])),O(e)}))},loadRname:f,onClose:function(){},pic:t,open:l,errorsRname:z})))))};var X=function(e){var t=e.albums,a=e.load,n=e.db;return r.a.createElement("ul",{className:"ListAlbums list"},a||(t.length?t.map((function(e){return r.a.createElement(G,{item:e,key:e.id,db:n})})):r.a.createElement(R,{type:"infos",text:"vous n'avez aucun albums"})))},Y=(a(91),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(f.a)(this,Object(d.a)(t).call(this,e))).state={loader:{u:r.a.createElement(k,{width:64,type:"timer",full:!0,bg:"rgba(0,0,0,.9)"}),albums:r.a.createElement(k,{width:64,type:"timer",full:!0,bg:"rgba(0,0,0,.9)"})},u:null,albums:[],redirect:!1},a.userID=localStorage.getItem("useID")||w.a.getItem("useID"),document.title="Picsy | Dash",a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.userID?this.props.db.getUser(this.userID).then((function(t){t?e.setState((function(e){return{loader:{u:!1,albums:e.loader.albums},u:t}}),(function(){e.props.db.getAlbumsOf(t.id).then((function(t){e.setState({loader:{albums:!1},albums:t})}))})):e.setState({redirect:r.a.createElement(D.c,{to:"/"})})})):this.setState({redirect:r.a.createElement(D.c,{to:"/"})})}},{key:"render",value:function(){var e=this.state,t=e.loader,a=e.redirect,n=e.albums,c=e.u;return r.a.createElement("section",{className:"Dash"},a,r.a.createElement(H,{u:c,load:t.u}),r.a.createElement(X,{db:this.props.db,albums:n,load:t.albums}),r.a.createElement("aside",{className:"add-album"},r.a.createElement(M,{tooltip:r.a.createElement(R,{tooltip:"add-album",type:"infos",text:"cr\xe9\xe9 un album",place:"top"}),className:"fas fa-folder-plus",target:"/add-album"})))}}]),t}(r.a.Component)),Q=(a(92),"https://image0.flaticon.com/icons/png/128/189/189334.png");var $=function(e){var t=e.type,a=e.onSubmit,c=e.load,o=e.className,l=e.voidForm,i=e.onChange,s=e.imgsLength,m=Object(n.useState)(""),f=Object(C.a)(m,2),d=f[0],p=f[1],b=Object(n.useState)([]),h=Object(C.a)(b,2),g=h[0],v=h[1],E=Object(n.useState)(""),y=Object(C.a)(E,2),O=y[0],j=y[1],S=Object(n.useState)(r.a.createRef()),I=Object(C.a)(S,1)[0];return Object(n.useEffect)((function(){l&&(I.current.value="")})),r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{className:"FormAdd ".concat(o),onSubmit:function(e){e.preventDefault();var n={name:O,picture:d||Q,refName:I,e:e};/album/i.test(t)&&delete n.picture,a(n)}},r.a.createElement("div",{className:"field-wrap-pseudo"},r.a.createElement("input",{ref:I,type:"text",value:O,placeholder:"nom de l'".concat(/album/i.test(t)?"album":"image"),autoComplete:"off",onChange:function(e){var t=e.target;return j(t.value)}}),r.a.createElement("label",{htmlFor:"name",className:"".concat(O.length?"active":"o-hide")},"nom d'",/album/i.test(t)?"album":"image")),/album/i.test(t)?null:r.a.createElement(P,{className:"hide",name:"picture",label:r.a.createElement(r.a.Fragment,null,r.a.createElement(R,{tooltip:"add-picture",type:"info",text:"ajout\xe9 une image",place:"top"}),r.a.createElement("figure",{"data-tip":"ajout\xe9 une image","data-for":"add-picture"},r.a.createElement("button",{type:"button",onClick:function(e){return e.target.parentNode.click()}},r.a.createElement("img",{src:Q,alt:"ajout\xe9",width:64})))),autoRead:!0,onChange:function(e,t,a){if(e.size<=1e6&&/image/i.test(e.type))p(t),function(a){j(""),a(e,t,O,I)}(i instanceof Function?i:function(){});else{var n=e.size>1e6?"fichier trop volumineux":"ce fichier n'est pas une image valide";v([].concat(Object(u.a)(g),[r.a.createElement(R,{key:Date.now(),type:"error",text:n,onClose:function(e){return(0,e.remove)()}})]))}}}),r.a.createElement(R,{tooltip:"disabled",type:"warn",text:"chargement ..."}),r.a.createElement("button",{type:"submit",disabled:!!c,className:c?"disabled":"","data-for":c?"disabled":"","data-tip":"chargement ..."},c||r.a.createElement("span",null,"ajout\xe9 l",/album/i.test(t)?"'album":"e.s image.s "+s))),g.map((function(e){return e})))},ee=(a(93),function(e){if(!(e instanceof Array))return"";var t="";return e.forEach((function(e){try{var a=null;if(!(a="string"===typeof e?JSON.parse(e):e).key||!a.val)return;/%/.test(a.val)&&/hue/.test(a.key)&&(a.val=a.val.replace("%","deg")),"hueRotate"===a.key&&(a.key="hue-rotate"),t+="".concat(a.key,"(").concat(a.val,") ")}catch(n){}})),t});var te=function(e){var t=e.pics,a=e.load,n=e.figcaption,c=e.width,o=e.classFig;return r.a.createElement("figure",{className:"ImgFilter"},a||r.a.createElement(r.a.Fragment,null,n&&r.a.createElement("figcaption",{className:o},n),r.a.createElement("img",{src:t.get("blob"),alt:t.get("name"),style:{filter:ee(t.get("filters"))},width:c||300})))};a(94);var ae=function(e){var t=e.item,a=e.db,c=e.even,o=Object(n.useState)(!1),l=Object(C.a)(o,2),i=l[0],s=l[1],m=Object(n.useState)(!0),f=Object(C.a)(m,2),d=f[0],p=f[1],b=Object(n.useState)(!1),h=Object(C.a)(b,2),g=h[0],v=h[1],E=Object(n.useState)([]),y=Object(C.a)(E,2),O=y[0],j=y[1],S=Object(n.useState)(r.a.createRef()),I=Object(C.a)(S,1)[0],D=Object(n.useState)(!1),N=Object(C.a)(D,2),w=N[0],x=N[1];return r.a.createElement(r.a.Fragment,null,d&&r.a.createElement("li",{onMouseEnter:function(){return I.current.classList.remove("hide")},onMouseLeave:function(){return I.current.classList.add("hide")},className:"ItemImg ".concat(d?"":"hide"," ").concat(c?"even":"")},r.a.createElement(_.HashLink,{className:"link-filter",to:"/filter/".concat(t.id),onContextMenu:function(e){return e.preventDefault()},onPointerDown:function(e){3===e.nativeEvent.which&&s(!i)},onKeyDown:function(e){/menu/i.test(e.key)&&s(!i)}},r.a.createElement(R,{tooltip:"nav",type:"info",text:"".concat(i?"fermer":"ouvrir"," menu"),place:"top"}),r.a.createElement(te,{pics:t,figcaption:r.a.createElement("div",{"data-for":"nav","data-tip":"menu",className:"status-control"},r.a.createElement("button",{ref:I,className:"hide",onClick:function(e){e.preventDefault(),x(!i),s(!i)}},r.a.createElement("i",{className:i?"fas fa-times":"fas fa-ellipsis-v"}))),classFig:"fig-picsy"})),r.a.createElement(Z,{closer:!0,itemType:"image",onRemove:function(){a.removePicture(t.id).then((function(){p(!1),s(!1)}))},manualOpen:w,onOpen:function(){return s(!0)},onRname:function(e){v(r.a.createElement(k,{width:12,type:"azure"})),a.rnameImg(t.id,e,t.get("album_id")).then((function(a){v(!1),a.success?j([].concat(Object(u.a)(O),[r.a.createElement(R,{onClose:function(e){return(0,e.remove)()},key:Date.now(),text:"image \xe0 \xe9t\xe9 renom\xe9 avec succ\xe9s",type:"success"})])):401===a.status?j([].concat(Object(u.a)(O),[r.a.createElement(R,{key:Date.now(),type:"error",onClose:function(e){return(0,e.remove)()},text:"l'image ".concat(e," exists d\xe9j\xe0 dans cet album")})])):console.warn("file rname 404 with : ",t.id,t.get("name"))}))},loadRname:g,onClose:function(){s(!1)},pic:t,open:i,errorsRname:O})))};a(95);var ne=function(e){var t=e.items,a=e.load,n=e.db;return r.a.createElement("ul",{className:"ListImg"},a||t.map((function(e,t){return r.a.createElement(ae,{key:e.id,item:e,db:n})})))};a(96);var re=function(e){var t=e.item,a=e.onRemove,c=e.onRname,o=Object(n.useState)(!1),u=Object(C.a)(o,2),l=u[0],i=u[1];return r.a.createElement("li",null,r.a.createElement("figure",null,r.a.createElement("img",{src:t.blob,alt:"pr\xe9 vue d'ajout",width:128}),r.a.createElement("figcaption",null,t.name),r.a.createElement(Z,{onRemove:a,onRname:function(e,a){i(r.a.createElement(k,{type:"btn",width:24})),setTimeout((function(){i(!1)}),Math.round(95*Math.random())+150),c(t.name,e)},open:!0,pic:{get:function(e){return"name"===e?t.name:t.blob}},loadRname:l,errorsRname:[],tipRemove:"supprim\xe9 de l'ajout",itemType:"image"})))};var ce=function(e){var t=e.items,a=e.error,n=e.onRemove,c=e.onRname;return r.a.createElement("ul",{className:"".concat(a?"error":""," Previews")},t.map((function(e,t){return r.a.createElement(re,{onRname:function(e,t){return c(e,t)},key:t,item:e,onRemove:n})})))},oe=(a(97),function(e,t){return new Promise((function(a,n){e.getImgsOf(t).then((function(e){a(e)})).catch((function(e){return n(e)}))}))});var ue=function(e){var t=e.db,a=e.loaderAlbum,c=e.album,o=Object(D.m)().id,l=Object(n.useState)(!1),i=Object(C.a)(l,2),s=i[0],m=i[1],f=Object(n.useState)([]),d=Object(C.a)(f,2),p=d[0],b=d[1],h=Object(n.useState)([]),g=Object(C.a)(h,2),v=g[0],E=g[1],y=Object(n.useState)([]),O=Object(C.a)(y,2),j=O[0],S=O[1],I=Object(n.useState)({pics:!1,loader:r.a.createElement(k,{width:64,bg:"rgba(0,0,0,.9)",type:"timer"})}),N=Object(C.a)(I,2),w=N[0],x=N[1];return r.a.createElement("section",{className:"ShowAlbum"},!a&&r.a.createElement("h2",null,c.get("name")),r.a.createElement(ne,{items:w.pics?w.pics:oe(t,o).then((function(e){x({pics:e,loader:!1})})),load:w.loader,db:t}),r.a.createElement($,{type:"picture",onSubmit:function(){s||(j.length?(m(r.a.createElement(k,{type:"btn",width:16})),Promise.all(Array.from(Array(j.filter((function(e){return e.name.length>=2&&e.name.length<42})).length).keys()).map((function(e){return t.addPicture(o,j[e].name,j[e].blob)}))).then((function(e){var t=[],a=j,n=p;e.forEach((function(e){e.success?(a=a.filter((function(t){return t.name!==e.name})),t.push(e.name)):401===e.status?n.push(r.a.createElement(R,{key:Date.now(),text:"".concat(e.name," existe d\xe9j\xe0 "),type:"error",onClose:function(e){return(0,e.remove)()}})):(n.push(r.a.createElement(R,{key:Date.now(),text:"une erreur de r\xe9seaux et survenue , check README.md ERROR_CODE[10b2] branch => v0.2.2-beta",type:"error",onClose:function(e){return(0,e.remove)()}})),console.error("unknow error in add image response : ",e))})),E(t||[]),b(n),S(a),m(!1),x({pics:!1,loader:r.a.createElement(k,{width:64,bg:"rgba(0,0,0,.9)",type:"timer"})})})).catch((function(e){m(!1),console.error(e)}))):b([].concat(Object(u.a)(p),[r.a.createElement(R,{key:Date.now(),text:"vous n'avez pas envoy\xe9 de fichier",type:"error",onClose:function(e){return(0,e.remove)()}})])))},onChange:function(e,t,a){a.length<2||a.length>=42?b([].concat(Object(u.a)(p),[r.a.createElement(R,{key:Date.now(),text:"taille de nom invalide",type:"error",onClose:function(e){return(0,e.remove)()}})])):j.find((function(e){return e.name===a}))?b([].concat(Object(u.a)(p),[r.a.createElement(R,{key:Date.now(),text:"ce nom d'image \xe9xiste d\xe9j\xe0",type:"error",onClose:function(e){return(0,e.remove)()}})])):j.length>=3?b([].concat(Object(u.a)(p),[r.a.createElement(R,{key:Date.now(),text:"Vous ne pouvez pas ajout\xe9 plus d'images en 1 seule fois .",type:"error",onClose:function(e){return(0,e.remove)()}})])):S([].concat(Object(u.a)(j),[{blob:t,name:a}]))},load:s,imgsLength:j.length}),p.map((function(e){return e})),j.length?r.a.createElement(ce,{onRname:function(e,t){j.find((function(e){return e.name===t}))?b([].concat(Object(u.a)(p),[r.a.createElement(R,{key:Date.now().toString()+Math.random().toString(),type:"error",onClose:function(e){var t=e.remove,a=e.hide;return t()?null:a()},text:"ce nom d'image existe d\xe9j\xe0"})])):(b([].concat(Object(u.a)(p),[r.a.createElement(R,{key:Date.now().toString()+Math.random().toString(),type:"success",onClose:function(e){var t=e.remove,a=e.hide;return t()?null:a()},text:"l'image ".concat(e," \xe0 \xe9t\xe9 re nom\xe9 en ").concat(t)})])),S(j.map((function(a){return a.name===e&&(a.name=t),a}))))},onRemove:function(e){return S(j.filter((function(t){return t.name!==e.name})))},items:j}):null,v.length?r.a.createElement("ul",null,v instanceof Array?v.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement(R,{type:"success",onClose:function(e){var t=e.remove,a=e.hide;return t()?null:a()},text:"L'image ".concat(e," \xe0 \xe9t\xe9 ajout\xe9 avec succ\xe9s")}))})):null):null)},le=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(f.a)(this,Object(d.a)(t).call(this,e))).state={loader:r.a.createElement(k,{width:16,type:"btn"}),redirect:!1,loadUser:r.a.createElement(k,{full:!0,width:48,type:"time",bg:"rgba(0,0,0,.9)"}),loaderAlbum:r.a.createElement(k,{full:!0,width:48,type:"az",bg:"rgba(0,0,0,.9)"}),album:null,errors:[]},document.title="Picsy | Album",a.onSubmit=a.onSubmit.bind(Object(p.a)(a)),a}return Object(b.a)(t,e),Object(m.a)(t,null,[{key:"add",value:function(){return"add"}}]),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.action!==t.add()&&this.props.db.albums.doc(document.location.hash.split("/").pop()).get().then((function(t){e.setState({album:t,loaderAlbum:!1})})),this.userID=localStorage.getItem("useID")||w.a.getItem("useID");var a={loader:!1,redirect:r.a.createElement(D.c,{to:"/"})};this.props.db.isLogged(this.userID).then((function(t){t.success?e.setState({loader:!1,user:t.user,loadUser:!1}):e.setState(a)})).catch((function(){return e.setState(a)}))}},{key:"onSubmit",value:function(e){var t=this,a=e.name,n=e.refName,c=this.state.user;this.setState({loader:r.a.createElement(k,{width:16,type:"btn"})}),a.length>=2&&a.length<=42?(n.current instanceof Node&&(n.current.value="",n.current.focus()),this.props.db.addAlbum(a,c.id).then((function(e){e.success?t.setState({loader:!1,formHide:!0,errors:[],createWithName:a}):t.setState((function(e){return{loader:!1,errors:[].concat(Object(u.a)(e.errors),[r.a.createElement(R,{key:Date.now(),type:"error",onClose:function(e){return(0,e.remove)()},text:"l'album ".concat(a," existe d\xe9j\xe0")})])}}))}))):this.setState((function(e){return{errors:[].concat(Object(u.a)(e.errors),[r.a.createElement(R,{key:Date.now(),type:"error",text:"taille de nom invalide",onClose:function(e){return(0,e.remove)()}})]),loader:!1}}))}},{key:"render",value:function(){var e=this.props.action,a=this.state,n=a.user,c=a.loader,o=a.loadUser,u=a.errors,l=a.formHide,i=a.createWithName,s=a.loaderAlbum,m=a.album;return r.a.createElement(r.a.Fragment,null,r.a.createElement(H,{u:n,load:o}),e===t.add()?r.a.createElement(r.a.Fragment,null,r.a.createElement($,{load:c,className:"".concat(l?"hide":""),type:"album",onSubmit:this.onSubmit}),u,l&&r.a.createElement(R,{type:"success",text:r.a.createElement("span",null,"l'album \xa0",r.a.createElement(_.HashLink,{to:"/dash"},i)," \xe0 \xe9t\xe9 cr\xe9\xe9 avec succ\xe9s")}),r.a.createElement(R,{type:"back",text:r.a.createElement(r.a.Fragment,null,r.a.createElement(_.HashLink,{to:"/dash"},"Tableau de bord"))})):r.a.createElement(r.a.Fragment,null,r.a.createElement(ue,{db:this.props.db,loaderAlbum:s,album:m})))}}]),t}(r.a.Component),ie=(a(98),function(e){function t(){return Object(s.a)(this,t),Object(f.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.blurValue,a=e.onChange,n=e.load,c=e.contrastValue,o=e.grayscaleValue,u=e.hueRotate;return r.a.createElement(r.a.Fragment,null,n||r.a.createElement("form",{className:"FormFilter"},r.a.createElement("div",null,r.a.createElement("label",null,"flootage ",r.a.createElement("i",null,t||0,"%")),r.a.createElement("input",{type:"range",min:"0",max:"100",defaultValue:t||0,onChange:function(e){e.preventDefault(),a({key:"blur",unity:"px",val:parseInt(e.target.value/2)})}})),r.a.createElement("div",null,r.a.createElement("label",null,"contraste ",r.a.createElement("i",null,c||0===c?c:100,"%")),r.a.createElement("input",{type:"range",min:"0",max:"1000",defaultValue:c||0===c?c:100,onChange:function(e){e.preventDefault(),a({key:"contrast",unity:"%",val:parseInt(e.target.value/2)})}})),r.a.createElement("div",null,r.a.createElement("label",null,"grisage ",r.a.createElement("i",null,o||0,"%")),r.a.createElement("input",{type:"range",min:"0",max:"100",defaultValue:o||0,onChange:function(e){e.preventDefault(),a({key:"grayscale",unity:"%",val:parseInt(e.target.value)})}})),r.a.createElement("div",null,r.a.createElement("label",null,"rotation teinte ",r.a.createElement("i",null,u||0,"\xb0")),r.a.createElement("input",{type:"range",min:"-8000",max:"8000",defaultValue:u||0,onChange:function(e){e.preventDefault(),a({key:"hueRotate",unity:"deg",val:parseInt(e.target.value)})}}))))}}]),t}(r.a.Component)),se=(a(99),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(f.a)(this,Object(d.a)(t).call(this,e))).state={loaderImg:r.a.createElement(k,{width:64,type:"earth",bg:"rgba(0,0,0,.9)"}),loaderUser:r.a.createElement(k,{width:64,type:"timer",bg:"rgba(30,30,42,.95)"}),loaderForm:r.a.createElement(k,{width:48,type:"az",bg:"rgba(30,30,42,.95)"}),user:null,picture:null,redirect:null,blurValue:null,contrastValue:null,grayscaleValue:null,hueRotateValue:null,timeUpdate:20},a.pictureID=document.location.hash.split("/").pop(),a.updatePicture=a.updatePicture.bind(Object(p.a)(a)),a.timeUpdateUp=a.timeUpdateUp.bind(Object(p.a)(a)),document.title="Picsy | filtre",a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentWillUnmount",value:function(){clearInterval(this.updateID),clearInterval(this.timeUpdateID)}},{key:"componentDidMount",value:function(){var e=this;this.userID=localStorage.getItem("useID")||w.a.getItem("useID"),this.userID?this.props.db.getUser(this.userID).then((function(t){t?e.setState({u:t,loaderUser:!1},(function(){e.props.db.pictures.doc(e.pictureID).get().then((function(t){e.setState({picture:t,loaderImg:!1,loaderForm:!1,blurValue:2*parseInt((t.get("filters").find((function(e){return"blur"===e.key}))||{}).val),contrastValue:parseInt((t.get("filters").find((function(e){return"contrast"===e.key}))||{}).val),grayscaleValue:parseInt((t.get("filters").find((function(e){return"grayscale"===e.key}))||{}).val),hueRotateValue:parseInt((t.get("filters").find((function(e){return"hue-rotate"===e.key}))||{}).val)},(function(){e.updateID=setInterval(e.updatePicture,2e4),e.timeUpdateID=setInterval(e.timeUpdateUp,1e3)}))})).catch((function(t){e.setState({loaderImg:null,loaderUser:null,redirect:r.a.createElement(D.c,{to:"/"})})}))})):e.setState({loaderImg:null,loaderUser:null,redirect:r.a.createElement(D.c,{to:"/"})})})):this.setState({loaderImg:null,loaderUser:null,redirect:r.a.createElement(D.c,{to:"/"})})}},{key:"timeUpdateUp",value:function(){this.setState((function(e){return{timeUpdate:e.timeUpdate-1>=0?e.timeUpdate-1:0}}))}},{key:"updatePicture",value:function(){var e=this,t=this.state.picture,a=localStorage.getItem("filters-".concat(t.id));try{a=JSON.parse(a)}catch(n){a=[]}finally{a||(a=[])}setTimeout((function(){e.setState({loaderForm:r.a.createElement(k,{width:48,type:"az",bg:"rgba(30,30,42,.95)"})})}),420),this.props.db.pictureSetFilters(t.id,a).then((function(){e.props.db.pictures.doc(e.pictureID).get().then((function(a){e.setState({picture:a,loaderForm:!1,blurValue:2*parseInt((a.get("filters").find((function(e){return"blur"===e.key}))||{}).val),contrastValue:parseInt((a.get("filters").find((function(e){return"contrast"===e.key}))||{}).val),grayscaleValue:parseInt((a.get("filters").find((function(e){return"grayscale"===e.key}))||{}).val),hueRotateValue:parseInt((t.get("filters").find((function(e){return"hue-rotate"===e.key}))||{}).val),timeUpdate:20})}))}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.loaderImg,n=t.loaderUser,c=t.loaderForm,o=t.u,u=t.picture,l=t.blurValue,i=t.contrastValue,s=t.grayscaleValue,m=t.hueRotateValue,f=t.timeUpdate;return r.a.createElement("section",{className:"PictureRoute"},r.a.createElement("header",null,r.a.createElement(H,{u:o,load:n})),r.a.createElement(R,{type:"back",text:r.a.createElement(_.HashLink,{to:"/dash"},"tableau de bord")}),r.a.createElement("aside",null,r.a.createElement(te,{load:a,pics:u,classFig:"fig-filter",figcaption:r.a.createElement(r.a.Fragment,null,!a&&r.a.createElement(r.a.Fragment,null,r.a.createElement("b",null,u.get("name")),"- ",r.a.createElement("i",null,new Date(u.get("createAt")).toLocaleDateString()))),width:512})),r.a.createElement("p",{className:"update-pic"},!c&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"Recalcul de l'image dans ",f),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){clearInterval(e.updateID),e.updatePicture(),e.updateID=setInterval(e.updatePicture,2e4),e.setState({timeUpdate:20})}},"maintenant"))),r.a.createElement(ie,{load:c,contrastValue:i,blurValue:l,grayscaleValue:s,hueRotate:m,onChange:function(t){var a=t.key,n=t.val,r=t.unity,c=localStorage.getItem("filters-".concat(u.id));try{c=JSON.parse(c)}catch(i){c=[]}finally{c||(c=[])}var o=!1;c=c.map((function(e){return e.key===a&&(e.val=n+r,o=!0),e})),o||c.push({key:a,val:n+r}),localStorage.setItem("filters-".concat(u.id),JSON.stringify(c));var l={};"blur"===a&&(n*=2),l[a+"Value"]=parseInt(n),e.setState(l)}}))}}]),t}(r.a.Component));a(100);var me=function(e){var t=e.id,a=e.db,c=Object(n.useState)(r.a.createElement(k,{type:"earth",width:32,bg:"rgba(0,0,0,.9)"})),o=Object(C.a)(c,2),l=o[0],i=o[1],s=Object(n.useState)(null),m=Object(C.a)(s,2),f=m[0],d=m[1],p=Object(n.useState)(null),b=Object(C.a)(p,2),h=b[0],g=b[1],v=Object(n.useState)(!1),E=Object(C.a)(v,2),y=E[0],O=E[1],j=Object(n.useState)(!1),S=Object(C.a)(j,2),I=S[0],N=S[1],x=Object(n.useState)([]),F=Object(C.a)(x,2),A=F[0],R=F[1],P=Object(n.useState)(r.a.createElement(k,{type:"earth",width:32,bg:"rgba(0,0,0,.9)"})),U=Object(C.a)(P,2),z=U[0],L=U[1];return Object(n.useEffect)((function(){f||a.users.doc(t).get().then((function(e){d(e),i(!1),a.getAlbumsOf(e.id).then((function(e){N(e),L(!1),e.forEach((function(e){a.getPictureOf(e.id).then((function(e){R([].concat(Object(u.a)(A),Object(u.a)(e)))}))}))}))})).catch((function(e){console.error(e)}))})),r.a.createElement("li",{className:"AccountItem"},h,l||r.a.createElement("section",{id:"".concat(f.id),onMouseEnter:function(){return O(!0)},onMouseLeave:function(){return O(!1)}},r.a.createElement("button",{onClick:function(){w.a.setItem("useID",f.id),localStorage.setItem("useID",f.id),g(r.a.createElement(D.c,{to:"/dash"}))}},r.a.createElement("figure",null,r.a.createElement("figcaption",null,f.get("pseudo")),r.a.createElement("img",{src:f.get("avatar"),alt:"avatar",width:"64"})),r.a.createElement("aside",{className:"".concat(y?"":"o-hide")},z||r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",null,r.a.createElement("li",null,I.length," album",I.length>1?"s":""),r.a.createElement("li",null,A.length," image",A.length>1?"s":"")))))))},fe=(a(101),function(e){function t(e){var a;Object(s.a)(this,t),(a=Object(f.a)(this,Object(d.a)(t).call(this,e))).state={redirect:!1},a.userID=localStorage.getItem("userID")||w.a.getItem("userID");try{a.userID=JSON.parse(a.userID)}catch(n){a.userID=[]}return a.userID||(a.userID=[]),document.title="Picsy | comptes",a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.userID.length||this.setState({redirect:r.a.createElement(D.c,{to:"/"})})}},{key:"render",value:function(){var e=this.state.redirect,t=this.props.db;return r.a.createElement("section",{className:"AccountList"},e,r.a.createElement("ul",null,this.userID.map((function(e){return r.a.createElement(me,{key:e,db:t,id:e})}))),r.a.createElement(R,{type:"back",text:r.a.createElement(_.HashLink,{to:"/dash"},"Tableau de bord")}))}}]),t}(r.a.Component)),de=(a(102),function(e){function t(e){var a;Object(s.a)(this,t),(a=Object(f.a)(this,Object(d.a)(t).call(this,e))).state={pseudo:"",fileName:"",avatar:t.defaultAvatar,errors:[],loaderSubmit:null},a.userID=localStorage.getItem("userID")||w.a.getItem("userID");try{a.userID=JSON.parse(a.userID)}catch(n){a.userID=[]}return a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.avatar,n=t.errors,c=t.fileName,o=t.loaderSubmit,l=t.redirect;return r.a.createElement("section",{className:"AddAccount"},l,r.a.createElement("h1",null,"Ajout\xe9",r.a.createElement("span",{className:"one-word"},"\xa0un\xa0"),r.a.createElement("span",{className:"user-word"},"utlisateur"),"\xa0",r.a.createElement("span",{className:"hide account-word"},"compte")),r.a.createElement(z,{onSubmit:function(t){t.preventDefault();var a=e.state.pseudo;if(a.length>=2&&a.length<=40){var n=e.state.avatar;e.setState({loaderSubmit:r.a.createElement(k,{width:16,type:"btn"})},(function(){e.props.db.users.add({pseudo:a,avatar:n}).then((function(t){e.userID||(e.userID=[]),e.userID.push(t.id),localStorage.setItem("userID",JSON.stringify(e.userID)),w.a.setItem("userID",JSON.stringify(e.userID),new Date(1.5*Date.now())),e.setState({redirect:r.a.createElement(D.c,{to:"/account-list"})})})).catch((function(e){return console.error(e)}))}))}else e.setState((function(e){return{errors:[].concat(Object(u.a)(e.errors),[r.a.createElement(R,{key:Date.now(),text:"pseudo taille invalide",type:"error",onClose:function(e){return(0,e.remove)()}})])}}))},onChangePseudo:function(t){return e.setState({pseudo:t.target.value.trim()})},avatar:a,fileName:c,errors:n,valuePseudo:this.state.pseudo,loaderSubmit:o,onChangeAvatar:function(t,a,n){if(t.size<=1e6&&/image/.test(t.type))e.setState({avatar:a,fileName:t.name});else{var c=t.size>=1e6?"fichier trop volumineux":"ce fichier n'est pas une image .";e.setState((function(e){return{errors:[].concat(Object(u.a)(e.errors),[r.a.createElement(R,{key:Date.now(),text:c,type:"error",onClose:function(e){return(0,e.remove)()}})])}}))}}}))}}]),t}(r.a.Component));de.defaultAvatar="https://image.flaticon.com/icons/png/128/149/149071.png";var pe=[{id:0,exact:!0,render:L,props:{},path:"/",name:"Home"},{id:1,exact:!1,render:Y,props:{},path:"/dash",name:"dashboard"},{id:2,exact:!1,render:le,props:{action:"add"},path:"/add-album",name:"album add"},{id:3,exact:!1,render:le,props:{action:"show"},path:"/album/:id",name:"show album"},{id:5,exact:!1,render:se,props:{},path:"/filter/:id",name:"filter album"},{id:6,exact:!1,render:de,props:{},path:"/add-account",name:"filter album"},{id:6,exact:!1,render:fe,props:{},path:"/account-list",name:"liste compte"}];var be=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(D.g,null,pe.map((function(e){return r.a.createElement(D.d,{key:e.id,path:e.path,exact:e.exact,render:function(){return r.a.createElement(e.render,Object.assign({},e.props,{db:i}))}})}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var he=a(13);o.a.render(r.a.createElement(he.HashRouter,null,r.a.createElement(be,null)),document.getElementById("root"))}]),[[42,1,2]]]);
//# sourceMappingURL=main.9c5076a6.chunk.js.map